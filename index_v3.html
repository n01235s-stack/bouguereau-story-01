<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Bouguereau — Ten-Minute Challenge</title>
<meta name="description" content="Scroll through a guided look at a William Bouguereau painting: read, then zoom to each detail." />
<meta property="og:title" content="Bouguereau — Ten-Minute Challenge" />
<meta property="og:description" content="Scroll through a guided look at a William Bouguereau painting: read, then zoom to each detail." />
<meta property="og:type" content="article" />
<meta name="theme-color" content="#ffffff" />
<style>
  /* ===== NYT-ish, print-friendly, no external assets ===== */
  :root{
    --page: #ffffff;
    --ink: #111;
    --muted:#666;
    --rule:#e5e7eb;
    --accent:#0a63ff;
    --rail:#b6beca;
    --maxw: 1100px;
    --col-gap: clamp(18px, 2.2vw, 28px);
    --radius: 12px;
    --speed: 700ms;
    --ease: cubic-bezier(.2,.7,0,1);
  }

  html, body { height: 100%; background: var(--page); color: var(--ink); }
  body{
    margin:0;
    font: 17px/1.6 system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
    text-rendering: optimizeLegibility;
  }
  .serif{ font-family: Cambria, Georgia, "Times New Roman", Times, serif; }

  /* Top progress bar */
  .topbar{
    position: fixed; inset: 0 0 auto 0; height: 3px; background: #f3f4f6; z-index: 40;
  }
  .topbar > i{ display:block; height:100%; width:0%; background: var(--accent); transition: width 120ms linear; }

  header.article{
    max-width: 780px; margin: 0 auto; padding: 36px 18px 10px;
  }
  .kicker{
    letter-spacing:.08em; text-transform:uppercase; font-weight:600; color:#7a7f86; font-size:12px;
  }
  h1.title{
    margin:.3rem 0 .6rem; font-size: clamp(28px, 5vw, 44px); line-height:1.2;
  }
  .dek{ color:#3c4043; margin: 0 0 8px; font-size: clamp(16px, 2.4vw, 20px); }
  .byline{ color: var(--muted); font-size: 14px; border-bottom:1px solid var(--rule); padding-bottom:16px; }

  /* Layout */
  .scrolly{
    max-width: var(--maxw);
    margin: 0 auto;
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--col-gap);
    padding: 18px;
  }
  @media (min-width: 980px){
    .scrolly{
      grid-template-columns: minmax(0, 54%) minmax(0, 46%);
      align-items: start;
    }
  }

  /* Sticky figure */
  .figure-wrap{
    position: sticky; top: 0;
    height: 100svh;
    background: #fafafa;
    border: 1px solid var(--rule);
    border-radius: var(--radius);
    overflow: hidden;
  }
  .stage{ position: relative; width: 100%; height: 100%; overflow: hidden; }
  #painting{
    position: absolute; inset: 0; margin:auto; max-width:none;
    will-change: transform;
    transition: transform var(--speed) var(--ease);
    image-rendering: auto;
  }

  /* Steps */
  .steps{ display: grid; gap: clamp(16px, 2vw, 22px); margin-block: 4px 48px; }
  .step{
    background: #fff;
    border: 1px solid var(--rule);
    border-radius: var(--radius);
    padding: clamp(18px, 2.2vw, 26px);
    min-height: clamp(320px, 48vh, 60vh); /* ensure activation window */
    display: grid; align-content: center;
  }
  .step h2{
    margin: 0 0 6px;
    font-size: clamp(18px, 2.2vw, 22px);
  }
  .step p{ margin: .5em 0 0; }
  .note{ color: var(--muted); font-size: 13px; margin-top: .6rem; }
  .step[aria-current="true"]{
    outline: 2px solid #dbeafe;
    box-shadow: 0 8px 28px rgba(10,99,255,.10);
  }

  /* Right rail dots (desktop) */
  .rail{
    position: sticky; top: 12px; height: 0; /* context */
  }
  .rail .dots{
    position: absolute; right: -26px; top: 8px;
    display: none; gap: 10px; flex-direction: column;
  }
  .rail .dot{
    width: 8px; height: 8px; border-radius: 999px;
    background: var(--rail); opacity: .55; transition: transform .15s ease, opacity .2s;
  }
  .rail .dot.active{ background: var(--accent); opacity: 1; transform: scale(1.25); }
  @media (min-width: 1220px){
    .rail .dots{ display: inline-flex; }
  }

  /* Pull quotes style (optional blocks) */
  .pull{
    border-left: 3px solid var(--ink);
    padding-left: 12px; margin: 10px 0 0; font-style: italic;
  }

  /* Footer credits */
  footer{
    max-width: 780px; margin: 36px auto; padding: 0 18px 36px; color: var(--muted); font-size: 14px; border-top:1px solid var(--rule);
  }

  /* Reduce motion */
  @media (prefers-reduced-motion: reduce){
    #painting{ transition: none !important; }
  }

  /* Print */
  @media print{
    .figure-wrap{ height: 60vh; position: relative; }
    .rail, .topbar{ display: none !important; }
  }
</style>
</head>
<body>

<div class="topbar" aria-hidden="true"><i id="pb"></i></div>

<header class="article">
  <div class="kicker serif">Ten-Minute Challenge</div>
  <h1 class="title serif">A Guided Look at William Bouguereau</h1>
  <p class="dek">Scroll to read short notes; the image will pan and zoom to each detail automatically.</p>
  <div class="byline">By Museumoo · <time id="today"></time></div>
</header>

<main class="scrolly">
  <!-- Sticky Image -->
  <div class="figure-wrap">
    <div class="stage" id="stage">
      <!-- Use your SmugMug Direct Link; this one is i-2CK6q8N -->
      <img id="painting"
           src="https://photos.smugmug.com/photos/i-2CK6q8N/0/O/i-2CK6q8N.jpg"
           alt="William Bouguereau painting (SmugMug i-2CK6q8N)" loading="eager" />
    </div>
  </div>

  <!-- Narrative + right-rail dots -->
  <section class="steps" id="steps">
    <div class="rail" aria-hidden="true">
      <div class="dots" id="dots"></div>
    </div>

    <!-- Each step defines a focal point (x/y in %) + zoom -->
    <article class="step" data-x="50" data-y="50" data-zoom="1.08">
      <h2 class="serif">1) Take in the whole</h2>
      <p>Start wide: note the classical balance, the triangular grouping, and how the light unifies the forms.</p>
      <div class="note">View: 1.08× · Center 50% / 50%</div>
    </article>

    <article class="step" data-x="35" data-y="32" data-zoom="2.2">
      <h2 class="serif">2) Faces as the narrative core</h2>
      <p>Edges soften over cheeks and tighten at the eyes—Bouguereau concentrates emotion with controlled transitions.</p>
      <p class="pull">Look for the tiny value steps around eyelids and lips: that’s where the “life” lives.</p>
      <div class="note">View: 2.2× · Center 35% / 32%</div>
    </article>

    <article class="step" data-x="52" data-y="66" data-zoom="2.0">
      <h2 class="serif">3) Hands: quiet structure</h2>
      <p>He models bone and tendon with reserved highlights; most form comes from careful halftones instead of hard lines.</p>
      <div class="note">View: 2.0× · Center 52% / 66%</div>
    </article>

    <article class="step" data-x="70" data-y="58" data-zoom="2.35">
      <h2 class="serif">4) Drapery: rhythms & edges</h2>
      <p>Alternating crisp and lost edges create a musical flow across folds; temperature shifts suggest sheen and weight.</p>
      <div class="note">View: 2.35× · Center 70% / 58%</div>
    </article>

    <article class="step" data-x="12" data-y="80" data-zoom="1.6">
      <h2 class="serif">5) Background breath</h2>
      <p>Subdued contrast and softened detail push the space back, giving the figures air. The silhouette reads cleanly.</p>
      <div class="note">View: 1.6× · Center 12% / 80%</div>
    </article>

    <article class="step" data-x="50" data-y="50" data-zoom="1.0">
      <h2 class="serif">6) Reassemble the parts</h2>
      <p>Return to the whole and feel how the pieces lock together—technique in service of sentiment.</p>
      <div class="note">View: 1.0× · Center 50% / 50%</div>
    </article>
  </section>
</main>

<footer>
  Image © your SmugMug photo settings. Text © Museumoo. Built as a single HTML file; no external libraries.
</footer>

<script>
(function(){
  // Date stamp
  const d = new Date();
  document.getElementById('today').textContent = d.toLocaleDateString(undefined,
    { year:'numeric', month:'long', day:'numeric' });

  const img = document.getElementById('painting');
  const stage = document.getElementById('stage');
  const steps = Array.from(document.querySelectorAll('.step'));
  const dotsBox = document.getElementById('dots');
  const progressBar = document.getElementById('pb');

  // Build right-rail dots
  steps.forEach((_, i)=>{
    const dot = document.createElement('b');
    dot.className = 'dot';
    dot.title = `Step ${i+1}`;
    dot.addEventListener('click', ()=> steps[i].scrollIntoView({behavior:'smooth', block:'center'}));
    dotsBox.appendChild(dot);
  });
  const dots = Array.from(dotsBox.children);

  let natural = { w: 0, h: 0 }, layout = null;

  function getDisplayedImageRect(){
    const s = stage.getBoundingClientRect();
    const sw = s.width, sh = s.height;
    const iw = natural.w, ih = natural.h;
    if (!iw || !ih) return { left:0, top:0, width: sw, height: sh, stageW:sw, stageH:sh };
    const stageAR = sw/sh, imgAR = iw/ih;
    let dispW, dispH, left, top;
    if (imgAR > stageAR){ dispW = sw; dispH = sw/imgAR; left = 0; top = (sh-dispH)/2; }
    else { dispH = sh; dispW = sh*imgAR; top = 0; left = (sw-dispW)/2; }
    return { left, top, width: dispW, height: dispH, stageW: sw, stageH: sh };
  }

  function applyView(xPct, yPct, zoom, animate=true){
    if (!layout) layout = getDisplayedImageRect();
    const { left, top, width, height, stageW, stageH } = layout;
    const px = left + (xPct/100) * width;
    const py = top  + (yPct/100) * height;
    const cx = stageW / 2, cy = stageH / 2;
    const tx = (cx - px) / zoom, ty = (cy - py) / zoom;
    if (!animate) img.style.transition = 'none';
    img.style.transform = `translate(${tx}px, ${ty}px) scale(${zoom})`;
    if (!animate){ img.getBoundingClientRect(); img.style.transition = ''; }
  }

  // Intersection: pick the step closest to viewport center
  const centerBand = new IntersectionObserver((entries)=>{
    let winner = null, best = Infinity, vhc = innerHeight/2;
    for (const e of entries){
      if (!e.isIntersecting) continue;
      const r = e.target.getBoundingClientRect();
      const mid = (r.top + r.bottom)/2;
      const d = Math.abs(vhc - mid);
      if (d < best){ best = d; winner = e.target; }
    }
    if (winner){
      steps.forEach(s=>s.removeAttribute('aria-current'));
      winner.setAttribute('aria-current', 'true');
      const i = steps.indexOf(winner);
      dots.forEach((d, j)=> d.classList.toggle('active', j===i));
      // progress
      const prog = (i+1) / steps.length * 100;
      progressBar.style.width = prog + '%';
      // view
      const x = parseFloat(winner.dataset.x||'50');
      const y = parseFloat(winner.dataset.y||'50');
      const z = parseFloat(winner.dataset.zoom||'1');
      applyView(x,y,z,true);
      history.replaceState(null, '', '#s'+(i+1));
    }
  }, { root: null, rootMargin: '-40% 0px -40% 0px', threshold: 0 });

  function onResize(){
    layout = getDisplayedImageRect();
    const current = document.querySelector('.step[aria-current="true"]') || steps[0];
    const x = parseFloat(current.dataset.x||'50');
    const y = parseFloat(current.dataset.y||'50');
    const z = parseFloat(current.dataset.zoom||'1');
    applyView(x,y,z,false);
  }

  function boot(){
    natural.w = img.naturalWidth; natural.h = img.naturalHeight;
    layout = getDisplayedImageRect();
    img.style.width = layout.width+'px';
    img.style.height = layout.height+'px';
    img.style.left = layout.left+'px';
    img.style.top = layout.top+'px';

    steps.forEach((s, i)=>{
      s.id = s.id || ('s'+(i+1));
      centerBand.observe(s);
    });

    // Jump to hash if provided
    if (location.hash){
      const tgt = document.querySelector(location.hash);
      if (tgt) setTimeout(()=> tgt.scrollIntoView({behavior:'instant', block:'center'}), 0);
    } else {
      applyView(parseFloat(steps[0].dataset.x||'50'), parseFloat(steps[0].dataset.y||'50'), parseFloat(steps[0].dataset.zoom||'1'), false);
    }
    addEventListener('resize', onResize);

    // Helper: click to log focal %
    stage.addEventListener('click',(e)=>{
      const r = stage.getBoundingClientRect(), l = getDisplayedImageRect();
      const x = (e.clientX - (r.left + l.left)) / l.width * 100;
      const y = (e.clientY - (r.top  + l.top )) / l.height * 100;
      if (x>=0 && x<=100 && y>=0 && y<=100) console.log(`Focal ≈ x:${x.toFixed(1)}%, y:${y.toFixed(1)}%`);
    });
  }

  if (img.complete) boot(); else img.addEventListener('load', boot, { once:true });
})();
</script>
</body>
</html>
